---
import type { ImageMetadata } from "astro";
const { t } = Astro.props;
import Popup from "@components/Popup.astro";
import r0 from "@assets/img/r0.jpg";
import volunteer from "@assets/img/sitcon-volunteer.jpg";

type timelineItem = {
	date: string;
	event: string;
};
type placeItem = {
	code: string;
	name: string;
	description: string;
	img: ImageMetadata;
};
type PersonInfo = {
	title: string;
	name: string;
	school: string;
	major: string;
};
const timelineItems: timelineItem[] = t.timeline_items;
const teams: PersonInfo[] = t.teams;
const placeItems: placeItem[] = [
	{
		code: "R0",
		name: "國際會議廳",
		description: "總計 426 席位\n當天的開場與 Keynote \n也會於此會議廳進行。",
		img: r0
	},
	{
		code: "R1 R2",
		name: "第一 / 第二會議室",
		description: "兩間會議室皆為 112 席位，走道及會議廳後方可再容納更多人。",
		img: r0
	},
	{
		code: "R3",
		name: "遠距會議室",
		description: "總計 36 席位，舞台兩側、第一排座位前方及會議廳後方可再容納更多人。",
		img: r0
	},
	{
		code: "",
		name: "交誼廳",
		description: "寬敞無障礙物的開放式空間，擁有一整面陽光明媚的落地窗。不同於其他議程廳的演講形式，此空間可自由佈置桌椅，進行各式活動。",
		img: r0
	}
];
---

<section id="time">
	<img src={volunteer.src} class="bg-image" alt="sitcon 2024" />
	<div class="bg-overlay"></div>
	<div class="popup-btn">
		<Popup btnText={t.popup_label} title={t.popup_label} id="place-staff-popup" background={r0.src}>
			<section class="popup-section">
				<p class="title">活動時程</p>
				<div id="timeline">
					<div>
						<svg viewBox="0 0 38 527" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M5.66667 14C5.66667 21.3638 11.6362 27.3333 19 27.3333C26.3638 27.3333 32.3333 21.3638 32.3333 14C32.3333 6.6362 26.3638 0.666667 19 0.666667C11.6362 0.666667 5.66667 6.6362 5.66667 14ZM17.2322 525.768C18.2085 526.744 19.7914 526.744 20.7677 525.768L36.6776 509.858C37.654 508.882 37.654 507.299 36.6776 506.322C35.7013 505.346 34.1184 505.346 33.1421 506.322L19 520.464L4.85784 506.322C3.88153 505.346 2.29862 505.346 1.32231 506.322C0.345998 507.299 0.345998 508.882 1.32231 509.858L17.2322 525.768ZM19 14L16.5 14L16.5 524L19 524L21.5 524L21.5 14L19 14Z"
								fill="black"
								fill-opacity="0.59"></path>
						</svg>
					</div>
					<div id="timeline-items">
						{
							timelineItems.map(item => (
								<div id="item">
									<p>{item.date}</p>
									<p>{item.event}</p>
								</div>
							))
						}
					</div>
				</div>
			</section>
			<section class="popup-section">
				<p class="title">場地詳情</p>
				<div class="place-info-wrapper">
					<div id="place-info">
						<p id="name">中央研究院<br />人文社會科學館</p>
						<div class="people-info">
							<p class="people-info-title">場館預估容納人數上限</p>
							<p id="people">1,300 人</p>
						</div>
					</div>
				</div>
			</section>
			<section id="place-items">
				{
					placeItems.map((item, index) => (
						<div id="place-item">
							<div class={`place-item-box ${(index + 1) % 2 == 0 ? "reverse-flex" : ""}`}>
								<div class="place-item-content">
									<div class="place-item-header">
										<p>{item.code}</p>
										<p>{item.name}</p>
									</div>
									<p class="place-item-desc">{item.description}</p>
								</div>
								<img src={item.img.src} alt={item.name} class="place-item-img" />
							</div>
						</div>
					))
				}
			</section>
			<section class="popup-section">
				<p class="title">籌備團隊</p>
				<div id="team-info">
					{
						teams.map(item => (
							<div class="team-item">
								<p class="team-item-title">{item.title}</p>
								<p class="team-item-title">{item.name}</p>
								<p>{item.school}</p>
								<p>{item.major}</p>
							</div>
						))
					}
				</div>
			</section>
		</Popup>
	</div>
	<div class="content">
		<div class="title-box">
			<p>{t.title1}</p>
			<p>{t.title2}</p>
		</div>
		<div class="info-box">
			<p>{t.date}</p>
			<p>{t.location}</p>
		</div>
	</div>
</section>

<style>
	#time {
		align-items: center;
		display: flex;
		justify-content: center;
		overflow: hidden;
		position: relative;
	}
	.content {
		display: flex;
		flex-direction: column;
		height: 52.2rem;
		margin-left: 11rem;
		margin-top: 11rem;
		overflow: hidden;
		position: absolute;
		width: 94.6rem;
		z-index: 2;
	}
	.popup-btn {
		bottom: 2rem;
		left: 50%;
		position: absolute;
		z-index: 4;
	}

	.bg-image {
		flex-shrink: 0;
		height: 52.2rem;
		width: 94.6rem;
	}
	.bg-overlay {
		background: #000;
		flex-shrink: 0;
		height: 52.2rem;
		opacity: 0.8;
		position: absolute;
		width: 94.6rem;
		z-index: 1;
	}

	.title-box {
		margin-bottom: 2.7rem;
	}
	.title-box p {
		color: #fff;
		font-size: 3.6rem;
		font-style: normal;
		font-weight: 700;
		line-height: 133%;
	}
	.info-box p {
		color: #fff;
		font-size: 1.7rem;
		font-style: normal;
		font-weight: 700;
		line-height: 133%;
	}

	#timeline {
		align-items: center;
		display: flex;
		gap: 5rem;
		justify-content: center;
		margin: 2rem;
		padding: 1rem;
	}
	svg {
		height: 31rem;
		width: 4rem;
	}
	#timeline-items #item {
		display: grid;
		gap: 0.5rem;
		grid-template-columns: 0.5fr 1fr;
	}
	#timeline-items #item p {
		color: #000;
		font-size: 2rem;
		font-weight: 700;
		line-height: 228%;
	}

	.popup-section {
		padding: 2rem;
	}
	.title {
		color: #000;
		font-size: 3.7rem;
		font-weight: 700;
		line-height: 120%;
	}

	.place-info-wrapper {
		align-items: center;
		display: flex;
		justify-content: center;
		margin-top: 3rem;
	}
	#place-info {
		align-items: center;
		background: #e8e8ec;
		border-radius: 1rem;
		display: inline-flex;
		gap: 2.8rem;
		justify-content: center;
		padding: 3.9rem 5.9rem;
	}
	#place-info p {
		color: #000;
		line-height: 120%;
	}
	#place-info #name {
		font-size: 2.6rem;
		font-weight: 700;
	}
	.people-info {
		text-align: center;
	}
	.people-info-title {
		font-size: 1.8rem;
		line-height: 120%;
		margin-bottom: 1rem;
	}
	#place-info #people {
		font-size: 3.3rem;
		font-weight: 700;
	}

	.place-item-box {
		align-items: center;
		display: flex;
		justify-content: space-between;
		margin: 5rem 0;
	}
	.place-item-content {
		padding: 3rem;
	}
	.place-item-header {
		font-size: 3.7rem;
		font-weight: 700;
		line-height: 120%;
		margin-bottom: 5.3rem;
	}
	.place-item-desc {
		color: #6e6e73;
		font-size: 1.9rem;
		line-height: 120%;
	}
	.place-item-img {
		border-radius: 1.6rem 0 0 1.6rem;
		height: 32.9rem;
		object-fit: cover;
		width: 45rem;
	}
	.reverse-flex {
		flex-direction: row-reverse;
	}
	.reverse-flex .place-item-img {
		border-radius: 0 1.6rem 1.6rem 0;
	}
	@media screen and (max-width: 1200px) {
		.place-item-img {
			border-radius: 1.6rem 0 0 1.6rem;
			height: 32.9rem;
			overflow: hidden;
			width: auto;
		}
	}

	#team-info {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr 1fr;
		margin-top: 5rem;
		text-align: center;
	}
	.team-item {
		line-height: 230%;
		margin-bottom: 4.3rem;
		text-align: center;
	}
	.team-item-title {
		font-size: 1.6rem;
		font-weight: 700;
	}

	@media screen and (max-width: 94.6rem) {
		.content {
			margin-left: 5rem !important;
			width: 100% !important;
		}
	}
</style>
