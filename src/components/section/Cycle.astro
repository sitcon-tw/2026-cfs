---
const { t, lang } = Astro.props;
import Arrow from "@assets/img/cycle/arrow.svg";
import SDGs4 from "@assets/img/cycle/SDGs-4.webp";
import SDGs9 from "@assets/img/cycle/SDGs-9.webp";
import SDGs10 from "@assets/img/cycle/SDGs-10.webp";
import SDGs17 from "@assets/img/cycle/SDGs-17.webp";
import CycleImgZH from "@assets/img/cycle/Cycle.svg";
import mobileCycleZH from "@assets/img/cycle/mobileCycle.svg";
import CycleImgEN from "@assets/img/cycle/Cycle.en.svg";
import mobileCycleEN from "@assets/img/cycle/mobileCycle.en.svg";
const CycleImg = lang === "zh-Hant" ? CycleImgZH : CycleImgEN;
const mobileCycle = lang === "zh-Hant" ? mobileCycleZH : mobileCycleEN;
---

<section id="cycle">
	<div class="title">
		<h2 class="aos aos-fadeIn"><span>{t.title}</span>{t.title2}</h2>
		<picture>
			<source srcset={mobileCycle.src} media="screen and (max-width: 50rem)" />
			<img src={CycleImg.src} alt="Cycle" id="cycle-img" />
		</picture>
		<!-- mobile Text -->
		<div class="mobileCycleText">
			<h3>{t.mobileCycleText.title1}</h3>
			<p>{t.mobileCycleText.desc1}</p>
			<h3>{t.mobileCycleText.title2}</h3>
			<p>{t.mobileCycleText.desc2}</p>
			<h3>{t.mobileCycleText.title3}</h3>
			<p>{t.mobileCycleText.desc3}</p>
		</div>

		<p class="slogan">
			{t.slogan1}<br />{t.slogan2}
		</p>
	</div>
	<div class="sdgs" id="sdgs-container">
		<div class="sdgs-item">
			<img src={SDGs4.src} alt="Hungry" />
			<div class="sdgs-text">
				<h4>{t.sdgs.title1}</h4>
				<p>{t.sdgs.desc1}</p>
			</div>
		</div>

		<div class="sdgs-item active">
			<img src={SDGs9.src} alt="Hungry" />
			<div class="sdgs-text">
				<h4>{t.sdgs.title2}</h4>
				<p>{t.sdgs.desc2}</p>
			</div>
		</div>

		<div class="sdgs-item">
			<img src={SDGs10.src} alt="Hungry" />
			<div class="sdgs-text">
				<h4>{t.sdgs.title3}</h4>
				<p>{t.sdgs.desc3}</p>
			</div>
		</div>

		<div class="sdgs-item">
			<img src={SDGs17.src} alt="Hungry" />
			<div class="sdgs-text">
				<h4>{t.sdgs.title4}</h4>
				<p>{t.sdgs.desc4}</p>
			</div>
		</div>
	</div>
</section>

<script>
	const sdgsContainer = document.getElementById("sdgs-container") as HTMLElement;
	const items = sdgsContainer.querySelectorAll(".sdgs-item");

	items.forEach(item => {
		item.addEventListener("mouseenter", function (this: HTMLElement) {
			items.forEach(i => i.classList.remove("active"));
			this.classList.add("active");
		});
	});
</script>

<style define:vars={{ arrowURL: `url(${Arrow.src})` }}>
	section {
		padding: 2rem;
	}

	#cycle-img {
		display: block;
		margin: auto;
	}
	.mobileCycleText {
		display: none;
		max-width: 35rem;
		margin: auto;
		padding: 2rem;
	}

	span {
		display: block;
	}
	h3::before {
		content: "";
		display: inline-block;
		width: 0.9em;
		height: 0.9em;
		background: var(--arrowURL) no-repeat center;
		background-size: contain;
		margin-right: 0.5rem;
	}

	h3 {
		font-size: 1.5rem;
		margin-bottom: 0.5rem;
		font-family: XiaoLai, "sans-serif";
	}

	p {
		margin-bottom: 1rem;
	}

	.slogan {
		text-align: center;
		margin-bottom: 3rem;
	}

	.sdgs {
		display: flex;
		justify-content: center;
		align-items: center;
		flex-wrap: wrap;
		gap: 2rem;
		margin-bottom: 14rem;
		position: relative;
	}

	.sdgs-item img {
		width: 8rem;
		transition: transform 0.3s ease;
		cursor: pointer;
	}

	.sdgs:has(.sdgs-item:hover) .active img {
		transform: none;
	}

	.sdgs:has(.sdgs-item:hover) .sdgs-item:hover img,
	.active img {
		transform: scale(1.1);
	}

	.sdgs-text {
		position: absolute;
		top: 100%;
		left: 50%;
		transform: translate(-50%, 0);
		width: 28rem;
		max-width: 100%;
		opacity: 0;
		visibility: hidden;
		transition:
			opacity 0.4s ease,
			visibility 0.4s ease;
		pointer-events: none;
		margin-top: 1.5rem;
	}

	h4 {
		font-size: 1.3rem;
		margin-bottom: 0.5rem;
	}

	.sdgs:has(.sdgs-item:hover) .active .sdgs-text {
		opacity: 0;
		visibility: hidden;
	}

	.active .sdgs-text,
	.sdgs:has(.sdgs-item:hover) .sdgs-item:hover .sdgs-text {
		opacity: 1;
		visibility: visible;
		pointer-events: auto;
	}

	@media screen and (max-width: 50rem) {
		#cycle-img {
			width: 70%;
			height: auto;
		}

		.mobileCycleText {
			display: block;
		}
	}

	@media screen and (max-width: 40rem) {
		.sdgs img {
			width: 5rem;
		}
	}

	@media print {
		section {
			padding-top: 0;
		}

		.sdgs {
			padding-top: 50pt;
			padding-bottom: 110pt;
		}

		.sdgs-text {
			position: static;
			transform: none;
			opacity: 1 !important;
			visibility: visible !important;
			transform: none;
			max-width: calc(50vw - 4rem);
			font-size: 10pt;
			margin-top: 12pt;
		}

		h4 {
			font-size: 12pt;
			margin-bottom: 0.5rem;
		}

		.sdgs-item img {
			transform: none !important;
			width: 45pt;
		}

		#cycle-img {
			width: 350pt;
		}

		.mobileCycleText {
			display: none;
		}
	}
</style>
